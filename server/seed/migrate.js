const mongoose = require('mongoose');
require('dotenv').config();

const Servico = require('../models/Servico'); // Ajuste o caminho conforme necessário

mongoose.connect(process.env.MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })
  .then(() => {
    console.log('MongoDB connected for migration');
    updateDocuments();
  })
  .catch(err => {
    console.error('MongoDB connection error:', err);
  });

async function updateDocuments() {
  try {
    // Atualize todos os documentos existentes para adicionar o campo 'imagem' com um valor padrão
    const defaultImageValue = 'data:image/png;base64,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'; // Substitua pelo valor padrão desejado
    await Servico.updateMany({}, { $set: { imagem: defaultImageValue } });
    console.log('Documents updated successfully');
  } catch (err) {
    console.error('Error updating documents:', err);
  } finally {
    mongoose.connection.close();
  }
}